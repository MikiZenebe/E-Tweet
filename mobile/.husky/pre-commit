#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# 1. Run the full test suite; abort if anything fails
pnpm test || exit 1

# 2. Re-format all files
pnpm format

# 3. Lint (errors will block the commit)
pnpm lint || exit 1

# 4. Re-stage any fixes from format or lint
git add .